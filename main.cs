using Mutagen.Bethesda;
using Mutagen.Bethesda.Skyrim;
using Mutagen.Bethesda.Synthesis;
using ReProccer.Utils;
using System.Text.Json.Nodes;

namespace ReProccer;

static class Executor
{
    internal static JsonObject? Strings;
    internal static JsonObject? Rules;
    internal static List<DataMap>? Statics;
    internal static IPatcherState<ISkyrimMod, ISkyrimModGetter>? State;

    internal static Lazy<Settings.AllSettings> AllSettings = new();
    internal static Settings.AllSettings? Settings;

    internal static List<IConstructibleObjectGetter>? AllRecipes;

    // entry point
    public static async Task<int> Main(string[] args)
    {
        return await SynthesisPipeline.Instance
        .AddPatch<ISkyrimMod, ISkyrimModGetter>(Initialize)
        .SetAutogeneratedSettings("Settings", "Settings.json", out AllSettings)
        .SetTypicalOpen(GameRelease.SkyrimSE, "ReProccer.esp")
        .Run(args);
    }

    // init process
    public static void Initialize(IPatcherState<ISkyrimMod, ISkyrimModGetter> patcherState)
    {
        // initiating settings
        Settings = AllSettings.Value;

        // getting state
        State = patcherState;

        // loading strings	
        JsonNode stringsJson = Helpers.LoadJson($"{AppContext.BaseDirectory}locales", "english.jsonc", true);

        string[] jsonFiles = [.. Directory.GetFiles($"{AppContext.BaseDirectory}locales", "*.json*")
        .Where(name => !name.Contains("english.jsonc"))
        .Select(file => Path.GetFileName(file))];

        if (jsonFiles.Length > 0)
        {
            foreach (var file in jsonFiles)
            {
                JsonNode locStrings = Helpers.LoadJson($"{AppContext.BaseDirectory}locales", file);
                stringsJson = Helpers.DeepMerge(stringsJson, locStrings);
            }
        }

        Strings = stringsJson!.AsObject();

        // building rules
        var loadOrder = State.LoadOrder;

        if (!loadOrder.Any(file => file.Key.FileName.Equals("Skyrim AE Redone - Core.esm")))
        {
            throw new Exception("\n--> Skyrim AE Redone - Core.esm should be active in the load order!\n");
        }

        if (!loadOrder.Any(file => file.Key.FileName.Equals("Skyrim AE Redone - Main.esp")))
        {
            throw new Exception("\n--> The patching is only required if the Main Module is installed\n");
        }

        JsonNode rulesJson = Helpers.LoadJson($"{AppContext.BaseDirectory}rules", "_rules-basic.jsonc");

        foreach (var file in loadOrder)
        {
            if (!file.Value.Enabled || Settings.General.IgnoredFiles.Any(name => name == file.Key.FileName)) continue;

            string[] match = Directory.GetFiles($"{AppContext.BaseDirectory}rules", $"{file.Key.Name}.json*");
            if (match.Length == 0) continue;

            JsonNode pluginRules = Helpers.LoadJson($"{AppContext.BaseDirectory}rules", $"{Path.GetFileName(match[0])}", true);
            rulesJson = Helpers.DeepMerge(rulesJson, pluginRules);
        }

        JsonNode userRules = Helpers.LoadJson($"{AppContext.BaseDirectory}rules", "_rules-user.jsonc", true);
        rulesJson = Helpers.DeepMerge(rulesJson, userRules);
        Rules = rulesJson!.AsObject();

        // parsing statics
        Statics = BuildStatics();

        // getting constructible objects
        AllRecipes = [.. State.LoadOrder.PriorityOrder
            .Where(plugin => !Settings.General.IgnoredFiles.Any(name => name == plugin.ModKey.FileName))
            .Where(plugin => plugin.Enabled)
            .WinningOverrides<IConstructibleObjectGetter>()];

        // running patchers
        if (Settings.General.ArmorPatcher) Patchers.ArmorPatcher.Run();
        if (Settings.General.WeaponsPatcher) Patchers.WeaponsPatcher.Run();
        Console.WriteLine("");
    }

    private static List<DataMap> BuildStatics() => [
            new DataMap{Id = "DLC1BoltExplosionFire02",                FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x010d90|EXPL")               },
            new DataMap{Id = "DLC1BoltExplosionFrost02",               FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x010d91|EXPL")               },
            new DataMap{Id = "DLC1BoltExplosionShock02",               FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x010d92|EXPL")               },
            new DataMap{Id = "skyre_ALCExplosiveArrow0Explosion",      FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000854|EXPL") },
            new DataMap{Id = "skyre_ALCAshenArrowExplosion",           FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000876|EXPL") },
            new DataMap{Id = "Charcoal",                               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x033760|MISC")                  },
            new DataMap{Id = "RuinsLinenPile01",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x034cd6|MISC")                  },
            new DataMap{Id = "ChaurusChitin",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad57|MISC")                  },
            new DataMap{Id = "DragonScales",                           FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ada3|MISC")                  },
            new DataMap{Id = "DragonBone",                             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ada4|MISC")                  },
            new DataMap{Id = "IngotCorundum",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ad93|MISC")                  },
            new DataMap{Id = "IngotOrichalcum",                        FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ad99|MISC")                  },
            new DataMap{Id = "IngotEbony",                             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ad9d|MISC")                  },
            new DataMap{Id = "IngotGold",                              FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ad9e|MISC")                  },
            new DataMap{Id = "IngotMoonstone",                         FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ad9f|MISC")                  },
            new DataMap{Id = "IngotQuicksilver",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ada0|MISC")                  },
            new DataMap{Id = "IngotMalachite",                         FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ada1|MISC")                  },
            new DataMap{Id = "IngotSilver",                            FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ace3|MISC")                  },
            new DataMap{Id = "IngotIron",                              FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ace4|MISC")                  },
            new DataMap{Id = "IngotSteel",                             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05ace5|MISC")                  },
            new DataMap{Id = "Firewood01",                             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06f993|MISC")                  },
            new DataMap{Id = "LeatherStrips",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0800e4|MISC")                  },
            new DataMap{Id = "Leather01",                              FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0db5d2|MISC")                  },
            new DataMap{Id = "IngotDwarven",                           FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0db8a2|MISC")                  },
            new DataMap{Id = "DLC2NetchLeather",                       FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x01cd7c|MISC")              },
            new DataMap{Id = "DLC2ChitinPlate",                        FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x02b04e|MISC")              },
            new DataMap{Id = "DLC2OreStalhrim",                        FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x02b06b|MISC")              },
            new DataMap{Id = "cc_IngotAmber",                          FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x000bc7|MISC")     },
            new DataMap{Id = "cc_IngotMadness",                        FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x000bc8|MISC")     },
            new DataMap{Id = "SoulGemPettyFilled",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x02e4e3|SLGM")                  },
            new DataMap{Id = "SoulGemLesserFilled",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x02e4e5|SLGM")                  },
            new DataMap{Id = "SoulGemCommonFilled",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x02e4f3|SLGM")                  },
            new DataMap{Id = "FireSalt",                               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad5e|INGR")                  },
            new DataMap{Id = "FrostSalt",                              FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad5f|INGR")                  },
            new DataMap{Id = "VoidSalt",                               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad60|INGR")                  },
            new DataMap{Id = "TrollFat",                               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad72|INGR")                  },
            new DataMap{Id = "glowDust",                               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x03ad73|INGR")                  },
            new DataMap{Id = "SprigganSap",                            FormKey = Helpers.ParseFormKey("Skyrim.esm|0x063b5f|INGR")                  },
            new DataMap{Id = "WispWrappings",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bc0e|INGR")                  },
            new DataMap{Id = "DwarvenOil",                             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0f11c0|INGR")                  },
            new DataMap{Id = "DLC2GhoulAsh",                           FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x01cd6d|INGR")              },
            new DataMap{Id = "WeapMaterialWood",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e717|KWDA")                  },
            new DataMap{Id = "WeapMaterialIron",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e718|KWDA")                  },
            new DataMap{Id = "WeapMaterialSteel",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e719|KWDA")                  },
            new DataMap{Id = "WeapMaterialDwarven",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71a|KWDA")                  },
            new DataMap{Id = "WeapMaterialElven",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71b|KWDA")                  },
            new DataMap{Id = "WeapMaterialOrcish",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71c|KWDA")                  },
            new DataMap{Id = "WeapMaterialGlass",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71d|KWDA")                  },
            new DataMap{Id = "WeapMaterialEbony",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71e|KWDA")                  },
            new DataMap{Id = "WeapMaterialDaedric",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x01e71f|KWDA")                  },
            new DataMap{Id = "ArmorMaterialDaedric",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd4|KWDA")                  },
            new DataMap{Id = "ArmorMaterialDragonplate",               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd5|KWDA")                  },
            new DataMap{Id = "ArmorMaterialDragonscale",               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd6|KWDA")                  },
            new DataMap{Id = "ArmorMaterialDwarven",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd7|KWDA")                  },
            new DataMap{Id = "ArmorMaterialEbony",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd8|KWDA")                  },
            new DataMap{Id = "ArmorMaterialElven",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbd9|KWDA")                  },
            new DataMap{Id = "ArmorMaterialElvenGilded",               FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbda|KWDA")                  },
            new DataMap{Id = "ArmorMaterialLeather",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbdb|KWDA")                  },
            new DataMap{Id = "ArmorMaterialGlass",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbdc|KWDA")                  },
            new DataMap{Id = "ArmorMaterialHide",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbdd|KWDA")                  },
            new DataMap{Id = "ArmorMaterialScaled",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbde|KWDA")                  },
            new DataMap{Id = "ArmorMaterialStudded",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbdf|KWDA")                  },
            new DataMap{Id = "ArmorMaterialImperialLight",             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe0|KWDA")                  },
            new DataMap{Id = "ArmorMaterialImperialStudded",           FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe1|KWDA")                  },
            new DataMap{Id = "ArmorMaterialImperialHeavy",             FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe2|KWDA")                  },
            new DataMap{Id = "ArmorMaterialIron",                      FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe3|KWDA")                  },
            new DataMap{Id = "ArmorMaterialIronBanded",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe4|KWDA")                  },
            new DataMap{Id = "ArmorMaterialOrcish",                    FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe5|KWDA")                  },
            new DataMap{Id = "ArmorMaterialSteel",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe6|KWDA")                  },
            new DataMap{Id = "ArmorMaterialSteelPlate",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x06bbe7|KWDA")                  },
            new DataMap{Id = "CraftingSmithingForge",                  FormKey = Helpers.ParseFormKey("Skyrim.esm|0x088105|KWDA")                  },
            new DataMap{Id = "CraftingSmelter",                        FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0a5cce|KWDA")                  },
            new DataMap{Id = "ArmorMaterialStormcloak",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0ac13a|KWDA")                  },
            new DataMap{Id = "MagicDisallowEnchanting",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c27bd|KWDA")                  },
            new DataMap{Id = "WeapMaterialImperial",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c5c00|KWDA")                  },
            new DataMap{Id = "WeapMaterialDraugr",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c5c01|KWDA")                  },
            new DataMap{Id = "WeapMaterialDraugrHoned",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c5c02|KWDA")                  },
            new DataMap{Id = "WeapMaterialFalmer",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c5c03|KWDA")                  },
            new DataMap{Id = "WeapMaterialFalmerHoned",                FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0c5c04|KWDA")                  },
            new DataMap{Id = "WeapMaterialSilver",                     FormKey = Helpers.ParseFormKey("Skyrim.esm|0x10aa1a|KWDA")                  },
            new DataMap{Id = "ArmorNightingale",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x10fd61|KWDA")                  },
            new DataMap{Id = "ArmorDarkBrotherhood",                   FormKey = Helpers.ParseFormKey("Skyrim.esm|0x10fd62|KWDA")                  },
            new DataMap{Id = "ArmorMaterialBlades",                    FormKey = Helpers.ParseFormKey("Update.esm|0x0009c0|KWDA")                  },
            new DataMap{Id = "ArmorMaterialForsworn",                  FormKey = Helpers.ParseFormKey("Update.esm|0x0009b9|KWDA")                  },
            new DataMap{Id = "ArmorMaterialThievesGuild",              FormKey = Helpers.ParseFormKey("Update.esm|0x0009bc|KWDA")                  },
            new DataMap{Id = "ArmorMaterialBearStormcloak",            FormKey = Helpers.ParseFormKey("Update.esm|0x0009be|KWDA")                  },
            new DataMap{Id = "WAF_WeapMaterialBlades",                 FormKey = Helpers.ParseFormKey("Update.esm|0xaf0103|KWDA")                  },
            new DataMap{Id = "WAF_WeapMaterialForsworn",               FormKey = Helpers.ParseFormKey("Update.esm|0xaf0104|KWDA")                  },
            new DataMap{Id = "WAF_ArmorWolf",                          FormKey = Helpers.ParseFormKey("Update.esm|0xaf0107|KWDA")                  },
            new DataMap{Id = "WAF_ArmorMaterialGuard",                 FormKey = Helpers.ParseFormKey("Update.esm|0xaf0112|KWDA")                  },
            new DataMap{Id = "WAF_DLC1WeapMaterialDawnguard",          FormKey = Helpers.ParseFormKey("Update.esm|0xaf0116|KWDA")                  },
            new DataMap{Id = "WAF_DLC1ArmorDawnguardHeavy",            FormKey = Helpers.ParseFormKey("Update.esm|0xaf0117|KWDA")                  },
            new DataMap{Id = "WAF_DLC1ArmorDawnguardLight",            FormKey = Helpers.ParseFormKey("Update.esm|0xaf0118|KWDA")                  },
            new DataMap{Id = "WAF_ArmorMaterialDraugr",                FormKey = Helpers.ParseFormKey("Update.esm|0xaf0135|KWDA")                  },
            new DataMap{Id = "WAF_ArmorMaterialThalmor",               FormKey = Helpers.ParseFormKey("Update.esm|0xaf0222|KWDA")                  },
            new DataMap{Id = "DLC1CrossbowIsEnhanced",                 FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x00399c|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialHunter",                FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x0050c4|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialDawnguard",             FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x012ccd|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialFalmerHardened",        FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x012cce|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialFalmerHeavy",           FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x012ccf|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialFalmerHeavyOriginal",   FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x012cd0|KWDA")               },
            new DataMap{Id = "DLC1ArmorMaterialVampire",               FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x01463e|KWDA")               },
            new DataMap{Id = "DLC1WeapMaterialDragonbone",             FormKey = Helpers.ParseFormKey("Dawnguard.esm|0x019822|KWDA")               },
            new DataMap{Id = "DLC2ArmorMaterialBonemoldLight",         FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024100|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialBonemoldHeavy",         FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024101|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialChitinLight",           FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024102|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialChitinHeavy",           FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024103|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialNordicLight",           FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024104|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialNordicHeavy",           FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024105|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialStalhrimHeavy",         FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024106|KWDA")              },
            new DataMap{Id = "DLC2ArmorMaterialStalhrimLight",         FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x024107|KWDA")              },
            new DataMap{Id = "DLC2WeaponMaterialStalhrim",             FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x02622f|KWDA")              },
            new DataMap{Id = "DLC2WeaponMaterialNordic",               FormKey = Helpers.ParseFormKey("Dragonborn.esm|0x026230|KWDA")              },
            new DataMap{Id = "cc_ArmorMaterialGolden",                 FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd63|KWDA")     },
            new DataMap{Id = "cc_ArmorMaterialDark",                   FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd64|KWDA")     },
            new DataMap{Id = "cc_ArmorMaterialMadness",                FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd65|KWDA")     },
            new DataMap{Id = "cc_ArmorMaterialAmber",                  FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd66|KWDA")     },
            new DataMap{Id = "cc_WeapMaterialAmber",                   FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd67|KWDA")     },
            new DataMap{Id = "cc_WeapMaterialMadness",                 FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd68|KWDA")     },
            new DataMap{Id = "cc_WeapMaterialGolden",                  FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd69|KWDA")     },
            new DataMap{Id = "cc_WeapMaterialDark",                    FormKey = Helpers.ParseFormKey("ccBGSSSE025-AdvDSGS.esm|0x21bd6a|KWDA")     },
            new DataMap{Id = "skyre__NoMeltdownRecipes",               FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x00080e|KWDA") },
            new DataMap{Id = "skyre_ENCAmmoSiphoningKeyword",          FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000b8f|KWDA") },
            new DataMap{Id = "skyre_MARAmmoBarbedKeyword",             FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d87|KWDA") },
            new DataMap{Id = "skyre_MARAmmoHeavyKeyword",              FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d88|KWDA") },
            new DataMap{Id = "ArcaneBlacksmith",                       FormKey = Helpers.ParseFormKey("Skyrim.esm|0x05218e|PERK")                  },
            new DataMap{Id = "DragonArmor",                            FormKey = Helpers.ParseFormKey("Skyrim.esm|0x052190|PERK")                  },
            new DataMap{Id = "SteelSmithing",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb40d|PERK")                  },
            new DataMap{Id = "DwarvenSmithing",                        FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb40e|PERK")                  },
            new DataMap{Id = "ElvenSmithing",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb40f|PERK")                  },
            new DataMap{Id = "OrcishSmithing",                         FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb410|PERK")                  },
            new DataMap{Id = "GlassSmithing",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb411|PERK")                  },
            new DataMap{Id = "EbonySmithing",                          FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb412|PERK")                  },
            new DataMap{Id = "DaedricSmithing",                        FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb413|PERK")                  },
            new DataMap{Id = "AdvancedArmors",                         FormKey = Helpers.ParseFormKey("Skyrim.esm|0x0cb414|PERK")                  },
            new DataMap{Id = "skyre_ALCFuse",                          FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000851|PERK") },
            new DataMap{Id = "skyre_ALCSuffocation",                   FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000873|PERK") },
            new DataMap{Id = "skyre_MARAdvancedFletching0",            FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d84|PERK") },
            new DataMap{Id = "skyre_MARAdvancedFletching1",            FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d85|PERK") },
            new DataMap{Id = "skyre_MARAdvancedFletching2",            FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d86|PERK") },
            new DataMap{Id = "skyre_ENCElementalBombard0",             FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000b8d|PERK") },
            new DataMap{Id = "skyre_ENCElementalBombard1",             FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000b8e|PERK") },
            new DataMap{Id = "skyre_MARBallistics",                    FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000d80|PERK") },
            new DataMap{Id = "skyre_SMTBreakdown",                     FormKey = Helpers.ParseFormKey("Skyrim AE Redone - Core.esm|0x000edf|PERK") }
        ];
}